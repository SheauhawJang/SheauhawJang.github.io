<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æ–‡æœ¬æ›¿æ¢è½¬æ¢å™¨</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      line-height: 1.6;
    }
    textarea, input[type="text"] {
      width: 100%;
      font-size: 14px;
      padding: 8px;
      box-sizing: border-box;
    }
    textarea {
      height: 200px;
      margin-bottom: 10px;
    }
    button {
      padding: 8px 16px;
      font-size: 16px;
      cursor: pointer;
    }
    hr {
      margin: 20px 0;
    }
    /* æ›¿æ¢è§„åˆ™åŒºåŸŸï¼Œä¸¤åˆ—å¸ƒå±€ */
    #rulesContainer {
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }
    .rule-column {
      width: 48%;
    }
    .rule-column h3 {
      margin-bottom: 5px;
    }
    .rule-column ul {
      list-style: none;
      padding-left: 0;
    }
    .rule-column li {
      margin-bottom: 5px;
    }
    .rule-form label {
      display: inline-block;
      width: 80px;
    }
    .rule-form input, .rule-form select {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>æ–‡æœ¬æ›¿æ¢è½¬æ¢å™¨</h1>
  <textarea id="inputText" placeholder="è¯·è¾“å…¥æ–‡ç« æ–‡æœ¬..."></textarea>
  <button onclick="convertText()">è½¬æ¢</button>
  <br><br>
  <textarea id="outputText" placeholder="è½¬æ¢åçš„æ–‡æœ¬..." readonly></textarea>
  
  <hr>
  <h2>æ›¿æ¢è§„åˆ™</h2>
  <div id="rulesContainer"></div>
  
  <h3>æ·»åŠ æ–°è§„åˆ™</h3>
  <div class="rule-form">
    <label for="ruleType">è§„åˆ™ç±»å‹:</label>
    <select id="ruleType">
      <option value="multi">å¤šå­—ç¬¦è§„åˆ™</option>
      <option value="single">å•å­—ç¬¦è§„åˆ™</option>
    </select>
    <br>
    <label for="rulePattern">åŒ¹é…å†…å®¹:</label>
    <input type="text" id="rulePattern" placeholder="è¯·è¾“å…¥è¦åŒ¹é…çš„æ–‡æœ¬">
    <br>
    <label for="ruleReplacement">æ›¿æ¢ä¸º:</label>
    <input type="text" id="ruleReplacement" placeholder="è¯·è¾“å…¥æ›¿æ¢å†…å®¹">
    <br>
    <button onclick="addRule()">æ·»åŠ è§„åˆ™</button>
  </div>
  
  <script>
    // é»˜è®¤è§„åˆ™ï¼šå¤šå­—ç¬¦è§„åˆ™ï¼ˆä¼˜å…ˆæ›¿æ¢ï¼‰
    var multiRules = [
      { pattern: "æ¯›æ³½ä¸œ", replacement: "ğŸ±ğŸ±ğŸ±" },
      { pattern: "ä¸­å—æµ·", replacement: "ğŸ€„ğŸ‡¦ğŸ‡¶ğŸŒŠ" },
      { pattern: "ä¸­å¤®", replacement: "ğŸ€„ğŸ" },
      { pattern: "ç‹æ´ªæ–‡", replacement: "ğŸƒğŸŸ¥ğŸ“„" },
      { pattern: "æ—å½ª", replacement: "ğŸŒ³ğŸ¯" },
      { pattern: "æ–‡é©", replacement: "ğŸ“„ğŸˆ¹" },
      { pattern: "å‘¨æ©æ¥", replacement: "ğŸ—“ï¸ğŸ”šğŸ”š" },
      { pattern: "ç§¦åŸ", replacement: "ğŸ’‹ğŸ°" },
      { pattern: "æ”¿æ²»", replacement: "â•ğŸ“" },
      { pattern: "å…±äº§", replacement: "ğŸ¹ğŸ¹" },
      { pattern: "ä¸­å›½", replacement: "â°â°" },
      { pattern: "ä¹ è¿‘å¹³", replacement: "ğŸ”ªğŸ”ªğŸ”ª" }
    ];
    
    // é»˜è®¤è§„åˆ™ï¼šå•å­—ç¬¦è§„åˆ™
    var singleRules = [
      { pattern: "æ¯›", replacement: "ğŸ±" },
      { pattern: "ç‹", replacement: "ğŸƒ" },
      { pattern: "æ—", replacement: "ğŸŒ³" },
      { pattern: "å†›", replacement: "ğŸ‘¨â€âœˆï¸" },
      { pattern: "å§”", replacement: "ğŸ‡»ğŸ‡ª" },
      { pattern: "ä¸­", replacement: "ğŸ€„" },
      { pattern: "å…š", replacement: "ğŸŠ" },
      { pattern: "å…±", replacement: "ğŸ¹" },
      { pattern: "å›½", replacement: "ğŸ" },
      { pattern: "æ°‘", replacement: "ğŸ™‡" },
      { pattern: "ä¹ ", replacement: "ğŸ”ª" }
    ];
    
    // è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šå­—ç¬¦
    function escapeRegExp(string) {
      return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }
    
    // æ›´æ–°é¡µé¢ä¸­æ˜¾ç¤ºçš„è§„åˆ™åˆ—è¡¨ï¼Œåˆ†å·¦å³ä¸¤åˆ—å±•ç¤º
    function updateRulesDisplay() {
      var container = document.getElementById("rulesContainer");
      var multiHtml = "<div class='rule-column'><h3>å¤šå­—ç¬¦è§„åˆ™</h3>";
      if (multiRules.length === 0) {
        multiHtml += "<p>æš‚æ— å¤šå­—ç¬¦è§„åˆ™ã€‚</p>";
      } else {
        multiHtml += "<ul>";
        multiRules.forEach(function(rule, index) {
          multiHtml += "<li>â€œ" + rule.pattern + "â€ â†’ â€œ" + rule.replacement + "â€ " +
                       "<button onclick='deleteRule(\"multi\", " + index + ")'>åˆ é™¤</button></li>";
        });
        multiHtml += "</ul>";
      }
      multiHtml += "</div>";
      
      var singleHtml = "<div class='rule-column'><h3>å•å­—ç¬¦è§„åˆ™</h3>";
      if (singleRules.length === 0) {
        singleHtml += "<p>æš‚æ— å•å­—ç¬¦è§„åˆ™ã€‚</p>";
      } else {
        singleHtml += "<ul>";
        singleRules.forEach(function(rule, index) {
          singleHtml += "<li>â€œ" + rule.pattern + "â€ â†’ â€œ" + rule.replacement + "â€ " +
                        "<button onclick='deleteRule(\"single\", " + index + ")'>åˆ é™¤</button></li>";
        });
        singleHtml += "</ul>";
      }
      singleHtml += "</div>";
      
      container.innerHTML = multiHtml + singleHtml;
    }
    
    // åˆ é™¤æŒ‡å®šè§„åˆ™
    function deleteRule(type, index) {
      if (type === "multi") {
        multiRules.splice(index, 1);
      } else {
        singleRules.splice(index, 1);
      }
      updateRulesDisplay();
    }
    
    // æ·»åŠ æ–°è§„åˆ™
    function addRule() {
      var type = document.getElementById("ruleType").value;
      var pattern = document.getElementById("rulePattern").value;
      var replacement = document.getElementById("ruleReplacement").value;
      if (!pattern) {
        alert("è¯·è¾“å…¥åŒ¹é…å†…å®¹ï¼");
        return;
      }
      if (type === "multi") {
        multiRules.push({ pattern: pattern, replacement: replacement });
      } else {
        singleRules.push({ pattern: pattern, replacement: replacement });
      }
      document.getElementById("rulePattern").value = "";
      document.getElementById("ruleReplacement").value = "";
      updateRulesDisplay();
    }
    
    // æŒ‰å½“å‰è§„åˆ™è½¬æ¢æ–‡æœ¬
    function convertText() {
      var text = document.getElementById('inputText').value;
      
      // æŒ‰å¤šå­—ç¬¦è§„åˆ™æ›¿æ¢ï¼ˆä¼˜å…ˆæ›¿æ¢ï¼‰
      multiRules.forEach(function(rule) {
        var re = new RegExp(escapeRegExp(rule.pattern), "g");
        text = text.replace(re, rule.replacement);
      });
      
      // æŒ‰å•å­—ç¬¦è§„åˆ™æ›¿æ¢
      singleRules.forEach(function(rule) {
        var re = new RegExp(escapeRegExp(rule.pattern), "g");
        text = text.replace(re, rule.replacement);
      });
      
      document.getElementById('outputText').value = text;
    }
    
    // é¡µé¢åŠ è½½æ—¶æ›´æ–°è§„åˆ™æ˜¾ç¤º
    updateRulesDisplay();
  </script>
</body>
</html>
